<!DOCTYPE html>
<html>
<head>
  <title>QR Code Generator</title>
</head>
<body>
  <h1>Link to QR Code</h1>
  <input type="text" id="urlInput" placeholder="Enter URL" />
  <button onclick="generateQR()">Generate QR</button>
  <div id="result"></div>

  <script>
    async function generateQR() {
      const url = document.getElementById("urlInput").value;

      const payload = {
        github_repo: "https://github.com/sri-narendra/qr-code",
        backend_path: "/main/main.py",  // ðŸ‘ˆ important
        input_data: { url }
      };

      const res = await fetch("https://fastapi-tools.onrender.com/run/", {
        method: "POST",
        headers: {
          "Content-Type": "application/json"
        },
        body: JSON.stringify(payload)
      });

      const data = await res.json();
      if (data.output && data.output.startsWith("iVBOR")) {
        document.getElementById("result").innerHTML =
          `<img src="data:image/png;base64,${data.output}" />`;
      } else {
        document.getElementById("result").innerText = "Error: " + data.output;
      }
    }
  </script>
</body>
</html>
